<div id="overlay">
	<div>
		<span>Drop files here</span>
	</div>
</div>
<ng-container [ngTemplateOutlet]="files && files.length > 0 ? fileList : emptyField"></ng-container>

<ng-template #emptyField>
	<div id="dropArea" (click)=input.click()>
		<svg xml:space="preserve" version="1.1" id="cloud" viewBox="0 0 10000 10000">
			<g>
				<path id="main_shape_contour"
					d="M4335 7520l-2529 0c-723,0 -1309,-586 -1309,-1309 0,-756 636,-1350 1389,-1306 -73,-828 900,-1302 1510,-769 -87,-883 608,-1652 1498,-1652 737,0 1351,531 1480,1231 232,-257 569,-419 942,-419 865,0 1469,844 1213,1655 550,155 953,660 953,1260 0,723 -586,1309 -1308,1309l-2510 0" />
				<path id="right_2" d="M7418 5122c217,-145 471,-223 732,-223 130,0 259,19 383,57" />
				<path id="right_1" d="M7078 5457c44,-63 93,-121 147,-175" />
				<path id="left_shape"
					d="M1646 6415c-5,-31 -8,-64 -8,-97 0,-334 271,-605 605,-605 101,0 196,24 279,67 64,-265 303,-462 589,-462 132,0 255,43 354,115" />
			</g>
			<path id="arrow_up"
				d="M5156 4327l0 3955c0,55 -45,100 -100,100l-112 0c-55,0 -100,-45 -100,-100l0 -3955 -567 588c-39,39 -102,40 -142,2l-81 -78c-40,-38 -41,-102 -2,-141l948 -982 948 982c38,39 37,103 -2,141l-81 78c-40,38 -103,37 -142,-2l-567 -588z" />
		</svg>

		<span id="label">
			Drop your files or click here to add them
		</span>
		<span *ngIf="restrictions" class="restrictions">{{restrictions}}</span>

		<input #input id="fileInput" type="file" multiple name="files" [attr.accept]="getAccept()" autocomplete="on"
			(change)="receiveFiles($event)" />
	</div>
</ng-template>

<ng-template #fileList>
	<div id="fileArea">
		<div>
			<span *ngIf="restrictions" class="restrictions">{{restrictions}}</span>
		</div>
		<ul id="fileList" [@list] dragCollection (dropCompleted)="sort($event)">
			<li *ngFor="let file of files; let i = index;" class="card" [@card] dragUnit>
				<fz-card [source]=file (changerequest)="addFile($event)" (deleterequest)="deleteFile($event)">
				</fz-card>
				<fz-menu class="options" dragRejector>
					<ul>
						<li>
							<button (click)="addFile(file)">
								<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1"
									viewBox="0 0 100000 100000" xmlns:xlink="http://www.w3.org/1999/xlink">
									<path style="fill: currentColor"
										d="M25000 54250l50000 0c2750,0 5000,2250 5000,5000l0 30000c0,2750 -2250,5000 -5000,5000l-50000 0c-2750,0 -5000,-2250 -5000,-5000l0 -30000c0,-2750 2250,-5000 5000,-5000zm18250 7000l4500 0 0 26000 -4500 0 0 -26000zm9000 0l4500 0 0 26000 -4500 0 0 -26000z" />
									<path style="fill: currentColor"
										d="M25000 5750l50000 0c2750,0 5000,2250 5000,5000l0 30000c0,2750 -2250,5000 -5000,5000l-50000 0c-2750,0 -5000,-2250 -5000,-5000l0 -30000c0,-2750 2250,-5000 5000,-5000zm22750 7000l4500 0 0 26000 -4500 0 0 -26000z" />
									<path style="fill: currentColor"
										d="M89467 24029c1088,-186 2120,545 2305,1633 186,1087 -545,2119 -1633,2304l-2719 468c1833,2873 3328,5987 4427,9284 1397,4190 2153,8656 2153,13280 0,4623 -756,9089 -2153,13279 -1444,4333 -3572,8349 -6253,11918 -660,880 -1909,1059 -2789,399 -881,-661 -1059,-1909 -399,-2790 2431,-3235 4356,-6867 5660,-10777 1254,-3764 1934,-7808 1934,-12029 0,-4222 -680,-8266 -1934,-12030 -1288,-3864 -3184,-7457 -5575,-10663 -232,-267 -396,-599 -460,-974 -185,-1087 546,-2119 1633,-2304l5803 -998z" />
									<path style="fill: currentColor"
										d="M10533 76969c-1088,185 -2120,-546 -2305,-1633 -186,-1088 545,-2119 1633,-2305l2719 -467c-1833,-2874 -3328,-5987 -4427,-9284 -1397,-4190 -2153,-8656 -2153,-13280 0,-4624 756,-9090 2153,-13280 1444,-4332 3572,-8348 6253,-11917 660,-881 1909,-1059 2789,-399 881,660 1059,1909 399,2789 -2431,3235 -4356,6867 -5660,10777 -1254,3764 -1934,7809 -1934,12030 0,4221 680,8266 1934,12030 1288,3864 3184,7456 5575,10663 232,267 396,599 460,973 185,1088 -546,2120 -1633,2305l-5803 998z" />
								</svg>
								<span>Change</span>
							</button>
						</li>
						<li>
							<button (click)="deleteFile(file)">
								<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1"
									viewBox="0 0 100000 100000" xmlns:xlink="http://www.w3.org/1999/xlink">
									<path style="fill: currentColor"
										d="M20000 24250l60000 0 0 65000c0,2750 -2250,5000 -5000,5000l-50000 0c-2750,0 -5000,-2250 -5000,-5000l0 -65000zm11615 19797l3182 -3182 15203 15203 15203 -15203 3182 3182 -15203 15203 15203 15203 -3182 3182 -15203 -15203 -15203 15203 -3182 -3182 15203 -15203 -15203 -15203z" />
									<path style="fill: currentColor"
										d="M15000 13250l20000 0 0 -2500c0,-2750 2250,-5000 5000,-5000l20000 0c2750,0 5000,2250 5000,5000l0 2500 20000 0c2750,0 5000,2250 5000,5000l0 2500 -25000 0 -30000 0 -25000 0 0 -2500c0,-2750 2250,-5000 5000,-5000z" />
								</svg>
								<span>Delete</span>
							</button>
						</li>
					</ul>
				</fz-menu>
			</li>
			<button id="add" (click)="addFile()" [@card] *ngIf="allowAddFiles" [@card]>
				<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" viewBox="0 0 800 1000"
					xmlns:xlink="http://www.w3.org/1999/xlink">
					<rect class="gray-fill" width="800" height="1000" />
					<circle class="light-fill" cx="400" cy="500" r="300" />
					<rect class="plus" x="375" y="300" width="50" height="400" />
					<rect class="plus" x="200" y="475" width="400" height="50" />
				</svg>
			</button>
		</ul>
		<button id="clear" (click)="clear()">
			<span>DELETE ALL</span>
		</button>
	</div>
</ng-template>